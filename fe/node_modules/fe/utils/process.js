const execa = require('execa')
const psList = require('ps-list')

/**
 * Detect process name/pid is exists
 * @param  {[number|string]} proc name/pid
 * @return {Bool}      result
 */
module.exports.exists = async proc => {
  const list = await psList().catch(err => {})
  return list.some(li => proc === (proc === proc + '' ? li.name : li.pid))
}

/**
 * Catch & return stdout
 * Focus on stdout, just return null when throw error
 * @param  {[type]} command [description]
 * @return {[type]}      [description]
 */
module.exports.stdout = async command => {
  let stdout = null
  try {
    stdout = await execa.shell(command)
    return stdout.stdout
  } catch (err) {
    return stdout
  }
}
