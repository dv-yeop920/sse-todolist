const { join } = require('path')
const { exists } = require('../../utils/fs')
module.exports = async runtime => {
  // console.log(runtime)
  if (runtime.project.config.CLIENT_MODE === 'vue') {
    if (!runtime.project.DIST_DIR) return false
    if (!await exists(join(runtime.project.DIST_DIR, 'dist'))) return false
    if (
      !await exists(
        join(
          runtime.project.DIST_DIR,
          'dist',
          `index.${runtime.project.config.ENABLE_SSR ? 'ssr' : 'spa'}.html`
        )
      )
    )
      return false
    return true
  }
  return true
}
